<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>NestJS 빠르게 배우기 01 - Changhoi Kim</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="white"><meta name="application-name" content="Changhoi Kim"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="msapplication-TileColor" content="white"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Changhoi Kim"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="사이드 프로젝트를 하기 위해서 백앤드를 여러가지로 고민하고 있었는데, 선택한 바로는 NestJS를 사용하기로 했다. 7.0.0 버전이 릴리즈 됐다고도 하고(현재는 7.0.3이다), star도 많이 받고 있어서 확인해봤다. 그리고 우연하게 직방에서 어떤 스택을 사용하고 있는지 확인할 일이 있었는데, 직방에서도 NestJS를 일부 도입하고 있는 것 같았다. 사"><meta property="og:type" content="blog"><meta property="og:title" content="NestJS 빠르게 배우기 01"><meta property="og:url" content="https://changhoi.kim/posts/backend/nestjs-quicklearn-01/"><meta property="og:site_name" content="Changhoi Kim"><meta property="og:description" content="사이드 프로젝트를 하기 위해서 백앤드를 여러가지로 고민하고 있었는데, 선택한 바로는 NestJS를 사용하기로 했다. 7.0.0 버전이 릴리즈 됐다고도 하고(현재는 7.0.3이다), star도 많이 받고 있어서 확인해봤다. 그리고 우연하게 직방에서 어떤 스택을 사용하고 있는지 확인할 일이 있었는데, 직방에서도 NestJS를 일부 도입하고 있는 것 같았다. 사"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg"><meta property="article:published_time" content="2020-03-19T15:00:00.000Z"><meta property="article:modified_time" content="2020-03-19T15:00:00.000Z"><meta property="article:author" content="changhoi"><meta property="article:tag" content="typescript"><meta property="article:tag" content="nestjs"><meta property="article:tag" content="NestJS_빠르게_배우기"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://changhoi.kim/posts/backend/nestjs-quicklearn-01/"},"headline":"NestJS 빠르게 배우기 01","image":[],"datePublished":"2020-03-19T15:00:00.000Z","dateModified":"2020-03-19T15:00:00.000Z","author":{"@type":"Person","name":"changhoi"},"publisher":{"@type":"Organization","name":"Changhoi Kim","logo":{"@type":"ImageObject","url":"https://changhoi.kim/img/logo.jpg"}},"description":"사이드 프로젝트를 하기 위해서 백앤드를 여러가지로 고민하고 있었는데, 선택한 바로는 NestJS를 사용하기로 했다. 7.0.0 버전이 릴리즈 됐다고도 하고(현재는 7.0.3이다), star도 많이 받고 있어서 확인해봤다. 그리고 우연하게 직방에서 어떤 스택을 사용하고 있는지 확인할 일이 있었는데, 직방에서도 NestJS를 일부 도입하고 있는 것 같았다. 사"}</script><link rel="canonical" href="https://changhoi.kim/posts/backend/nestjs-quicklearn-01/"><link rel="alternate" href="/rss2.xml" title="Changhoi Kim" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-QBSLW6WTZW" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-QBSLW6WTZW');</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.jpg" alt="Changhoi Kim" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 01"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-03-19T15:00:00.000Z" title="3/20/2020, 12:00:00 AM">2020-03-20</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2020-03-19T15:00:00.000Z" title="3/20/2020, 12:00:00 AM">2020-03-20</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/backend/">backend</a></span><span class="level-item">20분안에 읽기 (약 3050 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">NestJS 빠르게 배우기 01</h1><div class="content"><p>사이드 프로젝트를 하기 위해서 백앤드를 여러가지로 고민하고 있었는데, 선택한 바로는 <code>NestJS</code>를 사용하기로 했다. 7.0.0 버전이 릴리즈 됐다고도 하고(현재는 7.0.3이다), star도 많이 받고 있어서 확인해봤다. 그리고 우연하게 직방에서 어떤 스택을 사용하고 있는지 확인할 일이 있었는데, 직방에서도 NestJS를 일부 도입하고 있는 것 같았다. 사이드 프로젝트답게, 개인적으로 도전적인 스택을 고민했는데, 백앤드를 Golang으로 구성해보고 싶었지만, Golang은 조금 더 사용해보면서 코드 스타일에 대해서 연습해보고 싶었다. (솔직히 Golang 코드로 작성되는 모양새가 마음에 쏙 들지는 않음) 지금 마음 속으로는 NestJS, GraphQL, Electron 이렇게 생각하고 있다. 우선 이 글은 NestJS를 도입하기 위한 간단한 NestJS 개념을 정리해보는 글이다.</p>
<span id="more"></span>

<h2 id="시작하기"><a href="#시작하기" class="headerlink" title="시작하기"></a>시작하기</h2><p>이 글은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/">NestJS의 Overview</a>를 확인하고 작성하고 있다. 우선 NestJS가 제공해주는 보일러플레이트로 프로젝트를 시작하는 방법은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/first-steps">이 링크</a>에서 간단하게 확인할 수 있다. 시작해보면 간단히 아래와 같은 모습을 프로젝트에서 취하고 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line"> | main.ts                    # 앱의 시작점</span><br><span class="line"> | app.module.ts              # 앱의 루트 모듈</span><br><span class="line"> | app.controller.ts          # 앱의 컨트롤러</span><br></pre></td></tr></table></figure>

<p>이번 글은 Controller에 대해서 확인해보자.</p>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p><code>controller</code>는 흔히 알려져 있듯, Request, Response를 처리하는 로직이다. 특정 라우터에 붙여서 구체적인 요청을 받아서 처리한다.<br>Nest에서는 기본 컨트롤러를 만들려면 <code>class</code>와 <code>decorators</code>를 사용한다.</p>
<p><img src="https://docs.nestjs.com/assets/Controllers_1.png"><br><small>공식 문서에서 제공하는 이미지</small></p>
<h3 id="라우팅"><a href="#라우팅" class="headerlink" title="라우팅"></a>라우팅</h3><p><code>@Controller()</code>를 사용해서 컨트롤러를 지정할 수 있는데, 데코레이터를 통해서 연관된 라우터를 그룹 지을 수 있다. Nest 문서에서 나타난 코드는 아래와 같은데 라우트 패스 접두사를 cats로 정의한 것이다. 이러한 <code>prefix</code>를 지정해서 앞서 말한 관련된 라우터로 그룹 지을 수 있는 것이다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cats.<span class="property">controller</span>.<span class="property">tsJS</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controller</span>, <span class="title class_">Get</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;cats&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">findAll</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="comment">// 여기는 유저가 정의하는 부분이다.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This action returns all cats&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@Get()</code>은 Nest에게 HTTP request들의 앤드포인트를 구체적으로 지정하는 역할을 한다. <code>@Get()</code>을 사용해서 위에 컨트롤러에 정해진 prefix와 합쳐서 엔드 포인트를 정할 수 있다. 지금 예시는 <code>GET /cats</code>에서 동작하는 컨트롤러라고 볼 수 있다. request Method 데코레이터에서도 구체적인 엔드 포인트를 지정할 수 있는데, 예를 들어서 <code>GET /cats/spinks</code> 엔드 포인트를 원한다면 해당 메서드에 <code>@Get(&#39;spinks&#39;)</code>를 사용하면 된다.</p>
<p>위 예시는 200 코드와 응답을 줄 것이다. 일반적인 Express app처럼 <code>res.json</code>을 사용하지 않는데 이건 Nest가 사용하는 두 가지의 Response를 다루는 옵션과 관련 되어 있다.</p>
<ul>
<li><strong>Standard</strong>: Nest 문서에서 추천하는 방식이고, 내장된 매서드를 사용하는 것이다. JS Object나, Array로 값을 리턴하면 자동적으로 JSON으로 시리얼라이징 해준다. 하지만 나머지 JS 리터럴 값들은 시리얼라이징 하지 않고 보낸다. 그리고 status code는 항상 200이다 (단, POST 매서드 같은 경우는 201). 당연히 Default 값이라는 뜻이고 이를 변경하려면 <code>@HttpCode(...)</code>를 붙여줘야 한다. 이와 관련해서는 나중에 천천히 알아보자</li>
<li><strong>Library-specific</strong>: 쉽게 말해서 Express같은 라이브러리의 Response 스타일을 사용하도록 만드는 것이다. 이건 사용하고 싶지 않기 때문에 구체적인 얘기를 건너 뛰도록 하겠다.</li>
<li>주의: 두 가지를 동시에 사용할 수는 없다고 한다.</li>
</ul>
<p>스탠다드를 추천하고 있으니, 프로젝트나 글에서도 스탠다드 형태로 많이 정리해볼 예정이다.</p>
<h3 id="Request-Object"><a href="#Request-Object" class="headerlink" title="Request Object"></a>Request Object</h3><p>Nest는 Request 객체에 접근하는 방식을 마찬가지로 데코레이터로 제공한다. Default인 Request 객체는 Express의 객체를 따른다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controller</span>, <span class="title class_">Get</span>, <span class="title class_">Req</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Request</span> &#125; <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;cats&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">findAll</span>(<span class="meta">@Req</span>() <span class="attr">request</span>: <span class="title class_">Request</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This action returns all cats&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Express의 request 객체를 사용하지만, Express처럼 직접 <code>query</code>나 <code>body</code>를 꺼내오지 않아도 된다. (물론 할 수는 있는 것 같다.) <code>@Body()</code>, <code>@Query()</code>를 사용하면 request 객체에서 가져올 수 있다. 그 밖에 아래와 같은 데코레이터를 지원한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Request</span>() -&gt; req</span><br><span class="line"><span class="meta">@Response</span>(), <span class="meta">@Res</span>() -&gt; res    <span class="comment">// 위에서 언급한 것처럼, Library-specific한 응답을 보낼 때 사용한다.</span></span><br><span class="line"><span class="meta">@Next</span>() -&gt; next</span><br><span class="line"><span class="meta">@Session</span>() -&gt; req.<span class="property">session</span></span><br><span class="line"><span class="meta">@Param</span>(key?: <span class="built_in">string</span>) -&gt; req.<span class="property">params</span> / req.<span class="property">params</span>[key]</span><br><span class="line"><span class="meta">@Body</span>(key?: <span class="built_in">string</span>) -&gt; req.<span class="property">body</span> / req.<span class="property">body</span>[key]</span><br><span class="line"><span class="meta">@Query</span>(key?: <span class="built_in">string</span>) -&gt; req.<span class="property">query</span> / req.<span class="property">query</span>[key]</span><br><span class="line"><span class="meta">@Headers</span>(name?: <span class="built_in">string</span>) -&gt; req.<span class="property">headers</span> / req.<span class="property">headers</span>[name]</span><br></pre></td></tr></table></figure>

<h3 id="리소스"><a href="#리소스" class="headerlink" title="리소스"></a>리소스</h3><p>Nest는 일반적인 HTTP request 엔드포인트 데코레이터를 <code>@Get()</code>과 동일하게 제공하고 있다. - <code>@Post()</code>, <code>@Put()</code>, <code>@Delete()</code>, <code>@Patch()</code>, <code>@Options()</code>, <code>@Head()</code>, <code>@All()</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cats.controller.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controller</span>, <span class="title class_">Get</span>, <span class="title class_">Post</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;cats&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsController</span> &#123;</span><br><span class="line">  <span class="meta">@Post</span>()</span><br><span class="line">  <span class="title function_">create</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This action adds a new cat&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">findAll</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This action returns all cats&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>한 가지 개인적으로 궁금한 게 있는데, <code>@Get()</code>과 <code>@Post()</code> 처럼 여러 메서드를 데코레이터로 설정해둘 수 있을까? 또는 여러 엔드포인트에서 동작하도록 <code>@Get(&quot;something&quot;)</code>, <code>@Get(&quot;another&quot;)</code>을 붙여도 동작할까? 프로젝트 하면서 시도해봐야겠다.</p>
</blockquote>
<h3 id="와일드카드-라우팅"><a href="#와일드카드-라우팅" class="headerlink" title="와일드카드 라우팅"></a>와일드카드 라우팅</h3><p>패턴 기반 라우터도 제공하고 있다. 예를 들어서 아래 애스터리스크 *는 패턴으로 사용된다. <code>abcd</code>, <code>ab_cd</code>, <code>abecd</code> 모두 매칭된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&#x27;ab*cd&#x27;</span>)</span><br><span class="line"><span class="title function_">findAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This route uses a wildcard&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>?</code>, <code>+</code>, <code>*</code>, <code>()</code>가 라우터 패스에 사용될 수 있다.</p>
<h3 id="Status-code"><a href="#Status-code" class="headerlink" title="Status code"></a>Status code</h3><p>위에서 말한 대로, 기본은 200과 201(201은 <code>POST</code> 요청일 때)이다. 기본을 바꾸기 위해서 <code>@HtppCode(...)</code>를 사용하면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">HttpCode</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Post</span>()</span><br><span class="line"><span class="meta">@HttpCode</span>(<span class="number">204</span>)</span><br><span class="line"><span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This action adds a new cat&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>다만, 상황 별로 다르게 status code를 보내줘야 하는 경우에는 <code>@Res</code>를 쓰거나, 에러를 throw 해야 한다.</p>
<h3 id="커스텀-헤더"><a href="#커스텀-헤더" class="headerlink" title="커스텀 헤더"></a>커스텀 헤더</h3><p>커스텀한 <code>Response Header</code>를 만들기 위해서 <code>@Header()</code>를 사용할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Header</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@nest/common&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Post</span>()</span><br><span class="line"><span class="meta">@Header</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;none&#x27;</span>)</span><br><span class="line"><span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This action adds a new cat&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="리다이렉션"><a href="#리다이렉션" class="headerlink" title="리다이렉션"></a>리다이렉션</h3><p>리다이렉트 리스폰스를 주기 위해, <code>@Redirect()</code> 데코레이터를 사용하거나, <code>library-specific</code> 리스폰스 오브젝트를 사용할 수 있다. <code>@Redirect()</code>는 <code>url</code>를 인자값으로 넘겨줘야 한다. 그리고 선택적으로 <code>statusCode</code>를 넘겨줘야 하는데 기본 값은 302이다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>()</span><br><span class="line"><span class="meta">@Redirect</span>(<span class="string">&quot;https://changhoi.github.io&quot;</span>, <span class="number">301</span>)</span><br></pre></td></tr></table></figure>

<p>만약 <code>statusCode</code>와 리다이렉트 할 URL을 동적으로 설정해주고 싶다면, 메서드 안에서 아래와 같은 형태로 리턴을 해주면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;url&quot;</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="string">&quot;statusCode&quot;</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이 값이 <code>@Redirect()</code> 데코레이터 인자값으로 넘어간 값을 덮어 쓰게 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&quot;docs&quot;</span>)</span><br><span class="line"><span class="meta">@Redirect</span>(<span class="string">&quot;https://docs.nestjs.com&quot;</span>, <span class="number">302</span>)</span><br><span class="line"><span class="title function_">getDocs</span>(<span class="params"><span class="meta">@Query</span>(<span class="string">&quot;version&quot;</span>) version</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (version &amp;&amp; version === <span class="string">&quot;7&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">url</span>: <span class="string">&quot;https://docs.nestjs.com/v5/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="파라메타-라우팅"><a href="#파라메타-라우팅" class="headerlink" title="파라메타 라우팅"></a>파라메타 라우팅</h3><p>라우터에 파라메타를 넣는 방법은 Express와 동일하다. 그리고 파라메타를 얻는 방법도 마찬가지로 데코레이터를 사용해서 받아 올 수 있다. 메소드의 파라메타 뿐 아니라 라우터에서 지정된 파라메터도 받아 올 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line"><span class="title function_">findOne</span>(<span class="meta">@Param</span>() params): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(params.<span class="property">id</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action returns a #<span class="subst">$&#123;params.id&#125;</span> cat`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">findOne(<span class="doctag">@Params</span>(&quot;id&quot;) id): string &#123;&#125; 과 같이 id를 구체적으로 가져올 수도 있다.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="서브도메인-라우팅"><a href="#서브도메인-라우팅" class="headerlink" title="서브도메인 라우팅"></a>서브도메인 라우팅</h3><p><code>@Controller</code> 데코레이터는 <code>host</code> 옵션을 가져올 수 있는데, 이 옵션으로 들어오는 요청의 HTTP 호스트를 구체적으로 맞춰 줄 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(&#123; <span class="attr">host</span>: <span class="string">&quot;admin.example.com&quot;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">index</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;admin page&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>route와 마찬가지로, <code>host</code> 옵션은 동적인 값을 호스트 이름에 위치시키기 위해서 토큰처럼 사용할 수도 있다. host 파라미터 토큰은 <code>@Controller</code> 에서 <code>@HostParam()</code> 데코레이터를 통해서 접근할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>(&#123; <span class="attr">host</span>: <span class="string">&quot;:account.example.com&quot;</span> &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AccountController</span> &#123;</span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">getInfo</span>(<span class="params"><span class="meta">@HostParam</span>(<span class="string">&quot;account&quot;</span>) account: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> account;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="비동기성"><a href="#비동기성" class="headerlink" title="비동기성"></a>비동기성</h3><p>데이터 추출은 JS에서 대부분 비동기로 작동한다 (I&#x2F;O, Network). Nest에서는 async 함수를 잘 지원한다. 모든 비동기 함수는 <code>Promise</code>를 리턴한다. 즉, Nest가 스스로 <code>resolve</code> 할 수 있는 연기된 값 (미뤄진, Promised된 값)을 전달할 수 있다는 뜻이다. 아래와 같이 작성할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>()</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">findAll</span>(): <span class="title class_">Promise</span>&lt;<span class="built_in">any</span>[]&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위의 코드는 완전 유효하지만, Nest route handler에서는 RxJS의 <a target="_blank" rel="external nofollow noopener noreferrer" href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html">Observable streams</a>를 리턴함으로서 더 강력하게 위 동작을 해낼 수 있다. Nest는 자동적으로 해당 소스를 subscribe하고, 값이 나오면 가져간다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Get</span>()</span><br><span class="line"><span class="title function_">findAll</span>(): <span class="title class_">Observable</span>&lt;<span class="built_in">any</span>[]&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">of</span>([])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>개인적으로 RxJS를 모르기 때문에 비동기를 기쁘게 활용하도록 하려고 한다.</p>
<h3 id="Request-payloads"><a href="#Request-payloads" class="headerlink" title="Request payloads"></a>Request payloads</h3><p>POST 라우트 핸들러가 클라이언트의 payload를 사용하려면 먼저 DTO(Data Transfer Object)를 정의해야 한다. DTO는 어떻게 데이터가 보내지게 될 지 정의하는 객체이다. DTO 스키마를 Typescript의 <code>interface</code>나 <code>class</code>를 사용해서 정의할 수 있다. Nest에서는 이 객체를 클래스로 정의할 것을 추천한다. 이유는 클래스는 ECMA의 표준에 속하고, 컴파일된 JS에서도 실제 entities로서 다룰 수 있게 된다. 반면 <code>interface</code>는 컴파일 과정에서 삭제되기 때문에 런타임에서 Nest가 참조할 수가 없게 된다. 이러한 차이는 런타임에 이러한 메타데이터(<code>class</code>또는 <code>interface</code>로 정의된 DTO와 같은)에 접근해야 하는 <code>Pipe</code>와 같이 추가적인 가능성들을 더해주는 기능들이 있기 때문에 중요하다. 아래와 같이 DTO를 정의한 다음에 컨트롤러 안에서 사용할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CreateCatDto</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Post</span>()</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() createCatDto: CreateCatDto</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;This action adds a new cat&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>abstract class는 어떨까? abstract class는 컴파일 할 때 삭제되는 것이 아니라 abstract가 지워지는 것으로 알고 있는데, 프로퍼티를 initializing 하지 않아도 되니 타입스크립트의 옵션을 끄지 않아도 될 것 같은데.</p>
</blockquote>
<h3 id="에러-핸들링"><a href="#에러-핸들링" class="headerlink" title="에러 핸들링"></a>에러 핸들링</h3><p>별도의 파트가 있고, 관련된 내용은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/exception-filters">이 글</a>에서 확인할 수 있다.</p>
<h3 id="실행해보기"><a href="#실행해보기" class="headerlink" title="실행해보기"></a>실행해보기</h3><p>아래는 완전한 예시 샘플이다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">Controller</span>,</span><br><span class="line">  <span class="title class_">Get</span>,</span><br><span class="line">  <span class="title class_">Query</span>,</span><br><span class="line">  <span class="title class_">Post</span>,</span><br><span class="line">  <span class="title class_">Body</span>,</span><br><span class="line">  <span class="title class_">Put</span>,</span><br><span class="line">  <span class="title class_">Param</span>,</span><br><span class="line">  <span class="title class_">Delete</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreateCatDto</span>, <span class="title class_">UpdateCatDto</span>, <span class="title class_">ListAllEntities</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./dto&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;cats&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsController</span> &#123;</span><br><span class="line">  <span class="meta">@Post</span>()</span><br><span class="line">  <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() createCatDto: CreateCatDto</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This action adds a new cat&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">findAll</span>(<span class="params"><span class="meta">@Query</span>() query: ListAllEntities</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action returns all cats (limit: <span class="subst">$&#123;query.limit&#125;</span> items)`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&quot;:id&quot;</span>)</span><br><span class="line">  <span class="title function_">findOne</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&quot;id&quot;</span>) id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action returns a #<span class="subst">$&#123;id&#125;</span> cat`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Put</span>(<span class="string">&quot;:id&quot;</span>)</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&quot;id&quot;</span>) id: <span class="built_in">string</span>, <span class="meta">@Body</span>() updateCatDto: UpdateCatDto</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action updates a #<span class="subst">$&#123;id&#125;</span> cat`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Delete</span>(<span class="string">&quot;:id&quot;</span>)</span><br><span class="line">  <span class="title function_">remove</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&quot;id&quot;</span>) id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`This action removes a #<span class="subst">$&#123;id&#125;</span> cat`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 컨트롤러를 설정한 다음엔, Nest에게 컨트롤러가 있다는 걸 알려줘야 한다. 컨트롤러는 항상 module에 속한다. 그래서 <code>@Module()</code> 데코레이터 안에 controllers Array가 있는 것이다. 루트 모듈에 아래와 같이 작성하면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Module</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CatsController</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./cats/cats.controller&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  <span class="attr">controllers</span>: [<span class="title class_">CatsController</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="후기"><a href="#후기" class="headerlink" title="후기"></a>후기</h2><p>Controller 부분은 <code>GraphQL</code>을 사용하게 되면 하나만 설정하게 되는 건가? 그렇다고 해도 라우팅과 컨트롤러에서 많은 매력점을 가진 프레임워크인 것 같다.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/controllers">https://docs.nestjs.com/controllers</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>NestJS 빠르게 배우기 01</p><p><a href="https://changhoi.kim/posts/backend/nestjs-quicklearn-01/">https://changhoi.kim/posts/backend/nestjs-quicklearn-01/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>changhoi</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-03-20</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2020-03-20</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/typescript/">typescript</a><a class="link-muted mr-2" rel="tag" href="/tags/nestjs/">nestjs</a><a class="link-muted mr-2" rel="tag" href="/tags/NestJS-%EB%B9%A0%EB%A5%B4%EA%B2%8C-%EB%B0%B0%EC%9A%B0%EA%B8%B0/">NestJS_빠르게_배우기</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="title is-5">관련 글</h3><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/grpc-internals/"><img src="/images/2022-02-22-grpc-internals/thumbnail.png" alt="gRPC를 지탱하는 기술"></a></figure><div class="media-content"><p class="date"><time datetime="2022-02-21T15:00:00.000Z">2022-02-22</time></p><p class="title"><a href="/posts/backend/grpc-internals/">gRPC를 지탱하는 기술</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/go-lambda-try/"><img src="https://upload.wikimedia.org/wikipedia/commons/d/df/Go_gopher_app_engine_color.jpg" alt="Golang + Lambda로 신규 유저 정보 이메일로 보내기 삽질기"></a></figure><div class="media-content"><p class="date"><time datetime="2020-07-08T15:00:00.000Z">2020-07-09</time></p><p class="title"><a href="/posts/backend/go-lambda-try/">Golang + Lambda로 신규 유저 정보 이메일로 보내기 삽질기</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nest-todo-api-demo/"><img src="https://nestjs.com/img/nest-og.png" alt="Nest + TypeORM TODO API 만들기"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-25T15:00:00.000Z">2020-03-26</time></p><p class="title"><a href="/posts/backend/nest-todo-api-demo/">Nest + TypeORM TODO API 만들기</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-05/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 05"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-25T15:00:00.000Z">2020-03-26</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-05/">NestJS 빠르게 배우기 05</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-04/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 04"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-24T15:00:00.000Z">2020-03-25</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-04/">NestJS 빠르게 배우기 04</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-03/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 03"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-22T15:00:00.000Z">2020-03-23</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-03/">NestJS 빠르게 배우기 03</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-02/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 02"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-20T15:00:00.000Z">2020-03-21</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-02/">NestJS 빠르게 배우기 02</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-03/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 03"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-12T15:00:00.000Z">2020-03-13</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-03/">Monolithic 서버사이드 타입스크립트 세팅 03</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-02/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 02"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-11T15:00:00.000Z">2020-03-12</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-02/">Monolithic 서버사이드 타입스크립트 세팅 02</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-01/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 01"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-10T15:00:00.000Z">2020-03-11</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-01/">Monolithic 서버사이드 타입스크립트 세팅 01</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article></div></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/backend/nestjs-quicklearn-02/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">NestJS 빠르게 배우기 02</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/backend/serverside-typescript-setting-03/"><span class="level-item">Monolithic 서버사이드 타입스크립트 세팅 03</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">댓글</h3><div class="fb-comments" data-width="100%" data-href="https://changhoi.kim/posts/backend/nestjs-quicklearn-01/" data-num-posts="5"></div><script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/ko/sdk.js#xfbml=1&version=v12.0";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars2.githubusercontent.com/u/34329147?s=400&amp;u=9d1b1dc88bc8ee5965f35b0160780264c3619eb6&amp;v=4" alt="Changhoi Kim"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Changhoi Kim</p><p class="is-size-6 is-block">Co-Founder of Bayesians</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seoul, Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives/"><p class="title">75</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories/"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags/"><p class="title">47</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://www.linkedin.com/in/changhoi/" target="_blank" rel="external nofollow noopener noreferrer">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="LinkedIn" href="https://www.linkedin.com/in/changhoi/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/changhoi"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Email" href="mailto:changhoi0522@gmail.com"><i class="fas fa-envelope-square"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="English" href="https://jayce.kim"><i class="fas fa-language"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/backend/"><span class="level-start"><span class="level-item">backend</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/books/"><span class="level-start"><span class="level-item">books</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/database/"><span class="level-start"><span class="level-item">database</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/docker/"><span class="level-start"><span class="level-item">docker</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/essay/"><span class="level-start"><span class="level-item">essay</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/go/"><span class="level-start"><span class="level-item">go</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/logs/"><span class="level-start"><span class="level-item">logs</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/os/"><span class="level-start"><span class="level-item">os</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/rust/"><span class="level-start"><span class="level-item">rust</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/serverless/"><span class="level-start"><span class="level-item">serverless</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#시작하기"><span class="level-left"><span class="level-item">1</span><span class="level-item">시작하기</span></span></a></li><li><a class="level is-mobile" href="#Controller"><span class="level-left"><span class="level-item">2</span><span class="level-item">Controller</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#라우팅"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">라우팅</span></span></a></li><li><a class="level is-mobile" href="#Request-Object"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Request Object</span></span></a></li><li><a class="level is-mobile" href="#리소스"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">리소스</span></span></a></li><li><a class="level is-mobile" href="#와일드카드-라우팅"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">와일드카드 라우팅</span></span></a></li><li><a class="level is-mobile" href="#Status-code"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">Status code</span></span></a></li><li><a class="level is-mobile" href="#커스텀-헤더"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">커스텀 헤더</span></span></a></li><li><a class="level is-mobile" href="#리다이렉션"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">리다이렉션</span></span></a></li><li><a class="level is-mobile" href="#파라메타-라우팅"><span class="level-left"><span class="level-item">2.8</span><span class="level-item">파라메타 라우팅</span></span></a></li><li><a class="level is-mobile" href="#서브도메인-라우팅"><span class="level-left"><span class="level-item">2.9</span><span class="level-item">서브도메인 라우팅</span></span></a></li><li><a class="level is-mobile" href="#비동기성"><span class="level-left"><span class="level-item">2.10</span><span class="level-item">비동기성</span></span></a></li><li><a class="level is-mobile" href="#Request-payloads"><span class="level-left"><span class="level-item">2.11</span><span class="level-item">Request payloads</span></span></a></li><li><a class="level is-mobile" href="#에러-핸들링"><span class="level-left"><span class="level-item">2.12</span><span class="level-item">에러 핸들링</span></span></a></li><li><a class="level is-mobile" href="#실행해보기"><span class="level-left"><span class="level-item">2.13</span><span class="level-item">실행해보기</span></span></a></li></ul></li><li><a class="level is-mobile" href="#후기"><span class="level-left"><span class="level-item">3</span><span class="level-item">후기</span></span></a></li><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">4</span><span class="level-item">Reference</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.jpg" alt="Changhoi Kim" height="28"></a><p class="is-size-7"><span>&copy; 2026 changhoi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="external nofollow noopener noreferrer" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>